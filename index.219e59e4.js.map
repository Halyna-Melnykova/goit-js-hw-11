{"mappings":"qhBAAA,IAAAA,EAAAC,EAAA,S,uCAQA,MAAMC,EAAeC,SAASC,cAAc,gBACtCC,EAAYF,SAASC,cAAc,YACnCE,EAAgBH,SAASC,cAAc,cAGvCG,EAAa,IAAI,EAAAC,EAAAC,YAGjBC,EAAW,IAAIC,EAAAC,GAAJ,CAAmB,aAAc,CAChDC,aAAc,MACdC,aAAc,MAuEhB,SAASC,IACT,MAAQC,OAAQC,GAAed,SAC5BC,cAAc,YACdc,kBAAkBC,wBAErBC,OAAOC,SAAS,CACdC,IAAkB,EAAbL,EACLM,SAAU,WA3EZrB,EAAasB,iBAAiB,UAG9BC,eAAkCC,GAChCA,EAAMC,iBAENpB,EAAWqB,EAAIF,EAAMG,cAAcC,SAAsB,YAAEC,MAC3DxB,EAAWyB,KAAO,EAElB,IACE,MAAMC,QAAiB1B,EAAW2B,mBAGH,GAAG,IAA9BD,EAASE,KAAKC,KAAKC,OAMrB,OALA1B,EAAAX,GAASsC,OAAOC,QAAQ,4EAEalC,EAA3BmC,UAAY,GACtBlC,EAAcmC,UAAUC,IAAI,kBAC5BhB,EAAMiB,OAAOC,QASuB,GALtCjC,EAAAX,GAASsC,OAAOO,QACd,qBAAqBZ,EAASE,KAAKW,sBAIjCb,EAASE,KAAKW,WAAavC,EAAWwC,SAKxC,OAJA1C,EAAUmC,WAAY,EAAAQ,EAAAC,SAAmBhB,EAASE,KAAKC,MACvD9B,EAAcmC,UAAUC,IAAI,aAC5BhC,EAASwC,eACTnC,IAIYV,EAAJmC,WAAY,EAAAQ,EAAAC,SAAmBhB,EAASE,KAAKC,MACvD9B,EAAcmC,UAAUU,OAAO,aAC/BzC,EAASwC,UACTnC,IACA,MAAOqC,GACPC,QAAQC,IAAIF,OAvChB9C,EAAckB,iBAAiB,SA2C/BC,eAAkCC,GAChCnB,EAAWyB,MAAQ,EAEnB,IACE,MAAMC,QAAiB1B,EAAW2B,mBAE9B3B,EAAWyB,KAAOzB,EAAWwC,SAAWd,EAASE,KAAKW,WACxDxC,EAAcmC,UAAUC,IAAI,aAC5B/B,EAAAX,GAASsC,OAAOiB,KACd,kEAGFjD,EAAcmC,UAAUU,OAAO,aAGjC9C,EAAUmD,mBACR,aACA,EAAAR,EAAAC,SAAmBhB,EAASE,KAAKC,OAEnC,MAAOgB,GACPC,QAAQC,IAAIF","sources":["src/js/index.js"],"sourcesContent":["import Notiflix from 'notiflix';\nimport SimpleLightbox from 'simplelightbox';\n// Додатковий імпорт стилів\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nimport { PixabayAPI } from './pixabay-api';\nimport createGalleryCards from '../templates/gallery-card.hbs';\n\nconst searchFormEl = document.querySelector('.search-form');\nconst galleryEl = document.querySelector('.gallery');\nconst loadMoreBtnEl = document.querySelector('.load-more');\n// кнопка прихована в html клас is-hidden\n// екземпляр\nconst pixabayAPI = new PixabayAPI();\n\n// simplelightbox\nconst lightbox = new SimpleLightbox('.gallery a', {\n  captionsData: 'alt',\n  captionDelay: 250,\n});\n\nsearchFormEl.addEventListener('submit', onSearchFormSubmit);\nloadMoreBtnEl.addEventListener('click', onLoadMoreBtnClick);\n\nasync function onSearchFormSubmit(event) {\n  event.preventDefault();\n  // console.log(event)\n  pixabayAPI.q = event.currentTarget.elements['searchQuery'].value;\n  pixabayAPI.page = 1;\n\n  try {\n    const response = await pixabayAPI.getPhotosByQuery();\n    // console.log(response)\n    // Якщо бекенд повертає порожній масив\n    if (response.data.hits.length === 0) {\n      Notiflix.Notify.failure('Sorry, there are no images matching your search query. Please try again.');\n      // очищаєм розмітку, зникає кнопка, форма ресет\n      galleryEl.innerHTML = '';\n      loadMoreBtnEl.classList.add('is-hidden');\n      event.target.reset();\n      return;\n    }\n\n    Notiflix.Notify.success(\n      `'Hooray! We found ${response.data.totalHits} images.'`\n    );\n\n    // якщо одна сторінка, порівнюєм к-ть елементів з 40\n    if (response.data.totalHits <= pixabayAPI.per_page) {\n      galleryEl.innerHTML = createGalleryCards(response.data.hits);\n      loadMoreBtnEl.classList.add('is-hidden');\n      lightbox.refresh();\n      scrollPage();\n      return;\n    }\n    // розмітка + кнопка + lightbox\n    galleryEl.innerHTML = createGalleryCards(response.data.hits);\n    loadMoreBtnEl.classList.remove('is-hidden');\n    lightbox.refresh();\n    scrollPage();\n  } catch (err) {\n    console.log(err);\n  }\n}\n\nasync function onLoadMoreBtnClick(event) {\n  pixabayAPI.page += 1;\n\n  try {\n    const response = await pixabayAPI.getPhotosByQuery();\n    //  сховати кнопку коли дійшли до кінця колекції\n    if (pixabayAPI.page * pixabayAPI.per_page > response.data.totalHits) {\n      loadMoreBtnEl.classList.add('is-hidden');\n      Notiflix.Notify.info(\n        'We are sorry, but you have reached the end of search results.'\n      );\n    } else {\n      loadMoreBtnEl.classList.remove('is-hidden');\n    }\n\n    galleryEl.insertAdjacentHTML(\n      'beforeend',\n      createGalleryCards(response.data.hits)\n    );\n  } catch (err) {\n    console.log(err);\n  }\n}\n// Прокручування сторінки\nfunction scrollPage() {\nconst { height: cardHeight } = document\n  .querySelector(\".gallery\")\n  .firstElementChild.getBoundingClientRect();\n\nwindow.scrollBy({\n  top: cardHeight * 2,\n  behavior: \"smooth\",\n});\n}"],"names":["$eWCmQ","parcelRequire","$85a5f86b715fe7db$var$searchFormEl","document","querySelector","$85a5f86b715fe7db$var$galleryEl","$85a5f86b715fe7db$var$loadMoreBtnEl","$85a5f86b715fe7db$var$pixabayAPI","$6fOXY","PixabayAPI","$85a5f86b715fe7db$var$lightbox","$parcel$interopDefault","$fZKcF","captionsData","captionDelay","$85a5f86b715fe7db$var$scrollPage","height","cardHeight","firstElementChild","getBoundingClientRect","window","scrollBy","top","behavior","addEventListener","async","event","preventDefault","q","currentTarget","elements","value","page","response","getPhotosByQuery","data","hits","length","Notify","failure","innerHTML","classList","add","target","reset","success","totalHits","per_page","$cdIRi","default","refresh","remove","err","console","log","info","insertAdjacentHTML"],"version":3,"file":"index.219e59e4.js.map"}