{"mappings":"iiBAAA,IAAAA,EAAAC,EAAA,S,iEAQMC,EAAeC,SAASC,cAAc,gBACtCC,EAAYF,SAASC,cAAc,YACnCE,EAAgBH,SAASC,cAAc,cAGvCG,EAAa,IAAI,EAAAC,EAAAC,YAGjBC,EAAW,IAAIC,EAAAC,GAAJ,CAAmB,aAAc,CAChDC,aAAc,MACdC,aAAc,M,SAMDC,I,OAAAA,EAAfJ,EAAAX,EAAA,CAAAW,EAAAK,GAAAC,MAAA,SAAAC,EAAkCC,G,IAOxBC,E,yEANRD,EAAME,iBAENd,EAAWe,EAAIH,EAAMI,cAAcC,SAAsB,YAAEC,MAC3DlB,EAAWmB,KAAO,E,kBAGOnB,EAAWoB,mB,UAGA,KAH5BP,EAAQQ,EAAAC,MAGDC,KAAKC,KAAKC,OAAY,C,uBACjCrB,EAAAsB,GAASC,OAAOC,QAAQ,4EAEa9B,EAA3B+B,UAAY,GACtB9B,EAAc+B,UAAUC,IAAI,aAC5BnB,EAAMoB,OAAOC,Q,8BAIf7B,EAAAsB,GAASC,OAAOO,QACd,qBAA6CC,OAAxBtB,EAASU,KAAKa,UAAU,gBAI3CvB,EAASU,KAAKa,WAAapC,EAAWqC,UAAQ,C,uBAChDvC,EAAU+B,WAAY,EAAAS,EAAAC,SAAmB1B,EAASU,KAAKC,MACvDzB,EAAc+B,UAAUC,IAAI,aAC5B5B,EAASqC,UACTC,I,2BAIY3C,EAAJ+B,WAAY,EAAAS,EAAAC,SAAmB1B,EAASU,KAAKC,MACvDzB,EAAc+B,UAAUY,OAAO,aAC/BvC,EAASqC,UACTC,I,kDAEAE,QAAQC,IAAGvB,EAAAwB,I,2DArCkBC,MAAAC,KAAAC,W,SAyClBC,I,OAAAA,EAAf7C,EAAAX,EAAA,CAAAW,EAAAK,GAAAC,MAAA,SAAAC,EAAkCC,G,IAIxBC,E,yEAHRb,EAAWmB,MAAQ,E,kBAGMnB,EAAWoB,mB,OAA5BP,EAAQQ,EAAAC,KAEVtB,EAAWmB,KAAOnB,EAAWqC,SAAWxB,EAASU,KAAKa,WACxDrC,EAAc+B,UAAUC,IAAI,aAC5B3B,EAAAsB,GAASC,OAAOuB,KACd,kEAGFnD,EAAc+B,UAAUY,OAAO,aAGjC5C,EAAUqD,mBACR,aACA,EAAAb,EAAAC,SAAmB1B,EAASU,KAAKC,O,gDAGnCmB,QAAQC,IAAGvB,EAAAwB,I,0DApBkBC,MAAAC,KAAAC,WAwBjC,SAASP,IACT,IAAQW,EAAuBxD,SAC5BC,cAAc,YACdwD,kBAAkBC,wBAFbC,OAIRC,OAAOC,SAAS,CACdC,IAAkB,EAAbN,EACLO,SAAU,WA3EZhE,EAAaiE,iBAAiB,U,SAGIhD,G,OAAnBJ,EAAkBsC,MAAAC,KAAAC,cAFjCjD,EAAc6D,iBAAiB,S,SA2CGhD,G,OAAnBqC,EAAkBH,MAAAC,KAAAC,c","sources":["src/js/index.js"],"sourcesContent":["import Notiflix from 'notiflix';\nimport SimpleLightbox from 'simplelightbox';\n// Додатковий імпорт стилів\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nimport { PixabayAPI } from './pixabay-api';\nimport createGalleryCards from '../templates/gallery-card.hbs';\n\nconst searchFormEl = document.querySelector('.search-form');\nconst galleryEl = document.querySelector('.gallery');\nconst loadMoreBtnEl = document.querySelector('.load-more');\n// кнопка прихована в html клас is-hidden\n// екземпляр\nconst pixabayAPI = new PixabayAPI();\n\n// simplelightbox\nconst lightbox = new SimpleLightbox('.gallery a', {\n  captionsData: 'alt',\n  captionDelay: 250,\n});\n\nsearchFormEl.addEventListener('submit', onSearchFormSubmit);\nloadMoreBtnEl.addEventListener('click', onLoadMoreBtnClick);\n\nasync function onSearchFormSubmit(event) {\n  event.preventDefault();\n  // console.log(event)\n  pixabayAPI.q = event.currentTarget.elements['searchQuery'].value;\n  pixabayAPI.page = 1;\n\n  try {\n    const response = await pixabayAPI.getPhotosByQuery();\n    // console.log(response)\n    // Якщо бекенд повертає порожній масив\n    if (response.data.hits.length === 0) {\n      Notiflix.Notify.failure('Sorry, there are no images matching your search query. Please try again.');\n      // очищаєм розмітку, зникає кнопка, форма ресет\n      galleryEl.innerHTML = '';\n      loadMoreBtnEl.classList.add('is-hidden');\n      event.target.reset();\n      return;\n    }\n\n    Notiflix.Notify.success(\n      `'Hooray! We found ${response.data.totalHits} images.'`\n    );\n\n    // якщо одна сторінка, порівнюєм к-ть елементів з 40\n    if (response.data.totalHits <= pixabayAPI.per_page) {\n      galleryEl.innerHTML = createGalleryCards(response.data.hits);\n      loadMoreBtnEl.classList.add('is-hidden');\n      lightbox.refresh();\n      scrollPage();\n      return;\n    }\n    // розмітка + кнопка + lightbox\n    galleryEl.innerHTML = createGalleryCards(response.data.hits);\n    loadMoreBtnEl.classList.remove('is-hidden');\n    lightbox.refresh();\n    scrollPage();\n  } catch (err) {\n    console.log(err);\n  }\n}\n\nasync function onLoadMoreBtnClick(event) {\n  pixabayAPI.page += 1;\n\n  try {\n    const response = await pixabayAPI.getPhotosByQuery();\n    //  сховати кнопку коли дійшли до кінця колекції\n    if (pixabayAPI.page * pixabayAPI.per_page > response.data.totalHits) {\n      loadMoreBtnEl.classList.add('is-hidden');\n      Notiflix.Notify.info(\n        'We are sorry, but you have reached the end of search results.'\n      );\n    } else {\n      loadMoreBtnEl.classList.remove('is-hidden');\n    }\n\n    galleryEl.insertAdjacentHTML(\n      'beforeend',\n      createGalleryCards(response.data.hits)\n    );\n  } catch (err) {\n    console.log(err);\n  }\n}\n// Прокручування сторінки\nfunction scrollPage() {\nconst { height: cardHeight } = document\n  .querySelector(\".gallery\")\n  .firstElementChild.getBoundingClientRect();\n\nwindow.scrollBy({\n  top: cardHeight * 2,\n  behavior: \"smooth\",\n});\n}"],"names":["$bpxeT","parcelRequire","$44ae6d9db4eaca0f$var$searchFormEl","document","querySelector","$44ae6d9db4eaca0f$var$galleryEl","$44ae6d9db4eaca0f$var$loadMoreBtnEl","$44ae6d9db4eaca0f$var$pixabayAPI","$8H72y","PixabayAPI","$44ae6d9db4eaca0f$var$lightbox","$parcel$interopDefault","$5IjG7","captionsData","captionDelay","$44ae6d9db4eaca0f$var$_onSearchFormSubmit","$2TvXO","mark","_callee","event","response","preventDefault","q","currentTarget","elements","value","page","getPhotosByQuery","_ctx","sent","data","hits","length","$iU1Pc","Notify","failure","innerHTML","classList","add","target","reset","success","concat","totalHits","per_page","$86MAb","default","refresh","$44ae6d9db4eaca0f$var$scrollPage","remove","console","log","t0","apply","this","arguments","$44ae6d9db4eaca0f$var$_onLoadMoreBtnClick","info","insertAdjacentHTML","cardHeight","firstElementChild","getBoundingClientRect","height","window","scrollBy","top","behavior","addEventListener"],"version":3,"file":"index.7bd35404.js.map"}